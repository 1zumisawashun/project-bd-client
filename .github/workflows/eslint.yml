name: pr-test

on:
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - name: npm ci
        run: npm ci
      - name: npm run lint:js
        id: lint
        run: |
          result=$(npm run lint | tr '\n' '　')
          echo "result=$result" >> $GITHUB_OUTPUT
          echo "$result" | tr '　' '\n'
      - name: check lint
        if: contains(steps.lint.outputs.result, 'Warning')
        run: |
          echo 'lintでWarningが出ています。修正をお願いします'
          exit 1
